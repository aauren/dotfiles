#!/bin/bash

declare N=${1}

while : ; do
	ping_results=$(ping -c 2 ${N})
	if [[ ${?} == 0 ]]; then
		break
	else
		if [[ ${ping_results} == *"Operation not permitted"* ]]; then
			break
		fi
	fi
	echo "${N} does not appear to be up"
	sleep 15
done

while : ; do
	~/bin/nc -vz ${N} 22 && break
	echo "${N} does not appear to be listening to port 22"
	sleep 15
done
